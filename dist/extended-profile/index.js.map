{"version":3,"file":"index.js","names":["_propTypes","_interopRequireDefault","require","_i18n","_react","_ExtendedProfileProvider","_profileFields","_accountFields","_jsxRuntime","e","__esModule","default","ExtendedProfileFields","props","id","refreshUserProfile","updateUserProfile","profileFieldValues","formComponents","profileFieldErrors","isFromAccountMFE","includes","openedxLanguagePreference","getLocale","prevLangRef","useRef","useEffect","current","window","location","reload","jsx","patchProfile","components","children","extendedProfileValues","fetchProfile","propTypes","PropTypes","string","func","arrayOf","shape","fieldLabel","fieldValue","oneOfType","bool","SwitchContent","node","EmptyContent","EditableItemHeader","objectOf","_default","exports"],"sources":["../../src/extended-profile/index.jsx"],"sourcesContent":["import PropTypes from 'prop-types';\nimport { getLocale } from '@edx/frontend-platform/i18n';\nimport { useEffect, useRef } from 'react';\nimport ExtendedProfileFieldsProvider from './ExtendedProfileProvider';\nimport ProfileFields from './profile-fields';\nimport AccountFields from './account-fields';\n\nconst ExtendedProfileFields = (props) => {\n  const {\n    id, refreshUserProfile, updateUserProfile, profileFieldValues, formComponents, profileFieldErrors,\n  } = props;\n\n  const isFromAccountMFE = id.includes('account');\n\n  const openedxLanguagePreference = getLocale();\n  const prevLangRef = useRef();\n\n  useEffect(() => {\n    if (\n      prevLangRef.current\n    && prevLangRef.current !== openedxLanguagePreference\n    ) {\n      /** Reload the page when the language preference changes */\n      window.location.reload();\n    }\n\n    prevLangRef.current = openedxLanguagePreference;\n  }, [openedxLanguagePreference]);\n\n  return (\n    <ExtendedProfileFieldsProvider\n      patchProfile={updateUserProfile}\n      profileFieldErrors={profileFieldErrors ?? {}}\n      components={formComponents}\n    >\n      {isFromAccountMFE\n        ? (\n          <AccountFields extendedProfileValues={profileFieldValues} />\n        )\n        : (\n          <ProfileFields\n            fetchProfile={refreshUserProfile}\n            extendedProfileValues={profileFieldValues}\n          />\n        )}\n    </ExtendedProfileFieldsProvider>\n  );\n};\n\nExtendedProfileFields.propTypes = {\n  id: PropTypes.string,\n  refreshUserProfile: PropTypes.func,\n  updateUserProfile: PropTypes.func,\n  profileFieldValues: PropTypes.arrayOf(PropTypes.shape({\n    fieldLabel: PropTypes.string,\n    fieldValue: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  })),\n  formComponents: PropTypes.shape({\n    SwitchContent: PropTypes.node,\n    EmptyContent: PropTypes.node,\n    EditableItemHeader: PropTypes.node,\n  }),\n  profileFieldErrors: PropTypes.arrayOf(\n    PropTypes.objectOf(PropTypes.string),\n  ),\n};\n\nexport default ExtendedProfileFields;\n"],"mappings":";;;;;;AAAA,IAAAA,UAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AACA,IAAAE,MAAA,GAAAF,OAAA;AACA,IAAAG,wBAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,cAAA,GAAAL,sBAAA,CAAAC,OAAA;AACA,IAAAK,cAAA,GAAAN,sBAAA,CAAAC,OAAA;AAA6C,IAAAM,WAAA,GAAAN,OAAA;AAAA,SAAAD,uBAAAQ,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAE7C,MAAMG,qBAAqB,GAAIC,KAAK,IAAK;EACvC,MAAM;IACJC,EAAE;IAAEC,kBAAkB;IAAEC,iBAAiB;IAAEC,kBAAkB;IAAEC,cAAc;IAAEC;EACjF,CAAC,GAAGN,KAAK;EAET,MAAMO,gBAAgB,GAAGN,EAAE,CAACO,QAAQ,CAAC,SAAS,CAAC;EAE/C,MAAMC,yBAAyB,GAAG,IAAAC,eAAS,EAAC,CAAC;EAC7C,MAAMC,WAAW,GAAG,IAAAC,aAAM,EAAC,CAAC;EAE5B,IAAAC,gBAAS,EAAC,MAAM;IACd,IACEF,WAAW,CAACG,OAAO,IAClBH,WAAW,CAACG,OAAO,KAAKL,yBAAyB,EAClD;MACA;MACAM,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC;IAC1B;IAEAN,WAAW,CAACG,OAAO,GAAGL,yBAAyB;EACjD,CAAC,EAAE,CAACA,yBAAyB,CAAC,CAAC;EAE/B,oBACE,IAAAd,WAAA,CAAAuB,GAAA,EAAC1B,wBAAA,CAAAM,OAA6B;IAC5BqB,YAAY,EAAEhB,iBAAkB;IAChCG,kBAAkB,EAAEA,kBAAkB,IAAI,CAAC,CAAE;IAC7Cc,UAAU,EAAEf,cAAe;IAAAgB,QAAA,EAE1Bd,gBAAgB,gBAEb,IAAAZ,WAAA,CAAAuB,GAAA,EAACxB,cAAA,CAAAI,OAAa;MAACwB,qBAAqB,EAAElB;IAAmB,CAAE,CAAC,gBAG5D,IAAAT,WAAA,CAAAuB,GAAA,EAACzB,cAAA,CAAAK,OAAa;MACZyB,YAAY,EAAErB,kBAAmB;MACjCoB,qBAAqB,EAAElB;IAAmB,CAC3C;EACF,CAC0B,CAAC;AAEpC,CAAC;AAEDL,qBAAqB,CAACyB,SAAS,GAAG;EAChCvB,EAAE,EAAEwB,kBAAS,CAACC,MAAM;EACpBxB,kBAAkB,EAAEuB,kBAAS,CAACE,IAAI;EAClCxB,iBAAiB,EAAEsB,kBAAS,CAACE,IAAI;EACjCvB,kBAAkB,EAAEqB,kBAAS,CAACG,OAAO,CAACH,kBAAS,CAACI,KAAK,CAAC;IACpDC,UAAU,EAAEL,kBAAS,CAACC,MAAM;IAC5BK,UAAU,EAAEN,kBAAS,CAACO,SAAS,CAAC,CAACP,kBAAS,CAACC,MAAM,EAAED,kBAAS,CAACQ,IAAI,CAAC;EACpE,CAAC,CAAC,CAAC;EACH5B,cAAc,EAAEoB,kBAAS,CAACI,KAAK,CAAC;IAC9BK,aAAa,EAAET,kBAAS,CAACU,IAAI;IAC7BC,YAAY,EAAEX,kBAAS,CAACU,IAAI;IAC5BE,kBAAkB,EAAEZ,kBAAS,CAACU;EAChC,CAAC,CAAC;EACF7B,kBAAkB,EAAEmB,kBAAS,CAACG,OAAO,CACnCH,kBAAS,CAACa,QAAQ,CAACb,kBAAS,CAACC,MAAM,CACrC;AACF,CAAC;AAAC,IAAAa,QAAA,GAAAC,OAAA,CAAA1C,OAAA,GAEaC,qBAAqB","ignoreList":[]}