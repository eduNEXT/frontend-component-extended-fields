{"version":3,"file":"service.js","names":["_frontendPlatform","require","_auth","_utils","getExtendedProfileFields","url","getConfig","LMS_BASE_URL","data","getAuthenticatedHttpClient","get","catch","e","fields","getExtendedProfileFieldsV2","optionalFields","Object","entries","filter","_ref","key","extended_profile","includes","adapted","adaptFields","registrationFields","fromEntries"],"sources":["../../../src/extended-profile/data/service.js"],"sourcesContent":["import { getConfig } from '@edx/frontend-platform';\nimport { getAuthenticatedHttpClient } from '@edx/frontend-platform/auth';\nimport { adaptFields } from '../utils';\n\nexport async function getExtendedProfileFields() {\n  const url = `${getConfig().LMS_BASE_URL}/user_api/v1/account/registration/`;\n\n  const { data } = await getAuthenticatedHttpClient()\n    .get(url)\n    .catch((e) => {\n      throw e;\n    });\n\n  return { fields: data.fields };\n}\n\nexport async function getExtendedProfileFieldsV2() {\n  const url = `${getConfig().LMS_BASE_URL}/api/mfe_context?is_register_page=true`;\n\n  const { data } = await getAuthenticatedHttpClient()\n    .get(url)\n    .catch((e) => {\n      throw e;\n    });\n\n  const optionalFields = Object.entries(data.optionalFields.fields)\n    .filter(([key]) => data.optionalFields.extended_profile.includes(key));\n\n  const adapted = adaptFields({\n    registrationFields: data.registrationFields,\n    optionalFields: { fields: Object.fromEntries(optionalFields) },\n  });\n\n  return { fields: adapted };\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,iBAAA,GAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AACA,IAAAE,MAAA,GAAAF,OAAA;AAEO,eAAeG,wBAAwBA,CAAA,EAAG;EAC/C,MAAMC,GAAG,GAAG,GAAG,IAAAC,2BAAS,EAAC,CAAC,CAACC,YAAY,oCAAoC;EAE3E,MAAM;IAAEC;EAAK,CAAC,GAAG,MAAM,IAAAC,gCAA0B,EAAC,CAAC,CAChDC,GAAG,CAACL,GAAG,CAAC,CACRM,KAAK,CAAEC,CAAC,IAAK;IACZ,MAAMA,CAAC;EACT,CAAC,CAAC;EAEJ,OAAO;IAAEC,MAAM,EAAEL,IAAI,CAACK;EAAO,CAAC;AAChC;AAEO,eAAeC,0BAA0BA,CAAA,EAAG;EACjD,MAAMT,GAAG,GAAG,GAAG,IAAAC,2BAAS,EAAC,CAAC,CAACC,YAAY,wCAAwC;EAE/E,MAAM;IAAEC;EAAK,CAAC,GAAG,MAAM,IAAAC,gCAA0B,EAAC,CAAC,CAChDC,GAAG,CAACL,GAAG,CAAC,CACRM,KAAK,CAAEC,CAAC,IAAK;IACZ,MAAMA,CAAC;EACT,CAAC,CAAC;EAEJ,MAAMG,cAAc,GAAGC,MAAM,CAACC,OAAO,CAACT,IAAI,CAACO,cAAc,CAACF,MAAM,CAAC,CAC9DK,MAAM,CAACC,IAAA;IAAA,IAAC,CAACC,GAAG,CAAC,GAAAD,IAAA;IAAA,OAAKX,IAAI,CAACO,cAAc,CAACM,gBAAgB,CAACC,QAAQ,CAACF,GAAG,CAAC;EAAA,EAAC;EAExE,MAAMG,OAAO,GAAG,IAAAC,kBAAW,EAAC;IAC1BC,kBAAkB,EAAEjB,IAAI,CAACiB,kBAAkB;IAC3CV,cAAc,EAAE;MAAEF,MAAM,EAAEG,MAAM,CAACU,WAAW,CAACX,cAAc;IAAE;EAC/D,CAAC,CAAC;EAEF,OAAO;IAAEF,MAAM,EAAEU;EAAQ,CAAC;AAC5B","ignoreList":[]}